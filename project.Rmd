
---
title: "Covid19 Data"
author: "Team A"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:  
    rmdformats::readthedown:
      toc_float: true
      number_sections: true
      code_folding: hide
      keep_tex: yes
---



```{r setup, echo=FALSE, cache=FALSE}
  library(knitr)
library(rmdformats)
## Global options
options(max.print="75", scipen = 999, digits = 3, big.mark=",", warn = -1)
opts_chunk$set(echo=FALSE,
	             cache=TRUE,
               prompt=FALSE,
               tidy=TRUE,
               comment=NA,
               message=FALSE,
               warning=FALSE)
opts_knit$set(width=75)
```

```{r basicfunct, include=FALSE}
loadPkg = function(x) { if (!require(x,character.only=T, quietly =T)) { install.packages(x,dep=T,repos="http://cran.us.r-project.org"); if(!require(x,character.only=T)) stop("Package not found") } }
```

```{r libraries}
#library(ggplot2)
#require(gridExtra)
#library(kableExtra)
loadPkg("ggplot2")
loadPkg("gridExtra")
loadPkg("kableExtra")
```

![](covid19.png)

# Chapter 1: Introduction

Team A are the following members: Amal Alqahtani, Jiaxiang Peng, Naureen Elahi, and Xinya Mu. You may find our work over on [GitHub](https://github.com/amalqahtani/Data_Science).

Coronavirus disease-19 (COVID-19) has spread rapidly around the world, and many risk factors have been hypothesized to affect case and death rates. We felt that a relevant discussion to have would be `What are the most regions with the highest number of deaths`? What can we say about patient demographics? Is race considered a significant risk factor for increased COVID-19 incidence in the United States?' Are there any general trends amongst underlying health conditions? 
These questions are all suited to Exploratory Data Analysis (EDA), and with these questions in mind, we want to see if we could find data on COVID-19 that would be readily available for us to analyze. Eventually, our question morphed into the following: **What are the factors (i.e. patient demographics, social determinants of health, environmental variables, underlying health conditions, country of origin) affecting COVID-19 numbers of cases and death rate among different geographical locations in US?** 


We were able to find a dataset called `Covid-19-Dataset` on Github over here: [https://github.com/johndurbin93/Covid-19-Dataset](https://github.com/johndurbin93/Covid-19-Dataset). This dataset includes COVID-19 confirmed case number and death number through April 14, 2020  which were obtained for each U.S. county from the Center for Systems Science and Engineering (CSSE) Coronavirus Resource Center at Johns Hopkins University. Race demographics for counties was obtained from the County Health Rankings and Roadmaps Program database. Daily temperature data for counties was obtained from the National Oceanic and Atmospheric Administration. This data was compiled by a group of reserchers. 

The report is organized as follows:

1. Summary of Dataset
2. Description of Data
3. What are the patient demographics? (demographics Data)
4. Where do ...... come from? or What are the most regions with the highest number of deaths? (country of origin Data)
5. What are the social determinants of health? (social determinants of health Data)
6. Environmental variables Data Goes Here?
7. Are there any common underlying health conditions? (health conditions Data)
8. Have there been any ....... trends among patient over the times? (Trends Over Time)
9. Are patient a certain race? (race Data)
10. Discussion And Conclusion


# Chapter 2: Description of the Data
## Source Data


The data looks like the following:

```{r input_data}
library("readxl")
data <- read_excel("Counties_Dataset.xlsx")
#summary(data)
str(data)
#names(data)[8:] <- c("total_cases","deaths")
cols <- c(1:2, 7:19)
small_df=data[,cols]
#small_df
#Print out the first 5 and the last 3 rows of the dataframe.**  
#head(data, 5)
#tail(data, 3)

```

The Covid19 dataset has `r ncol(data)` columns and `r nrow(data)` rows/entries, for a total of `r ncol(data)*nrow(data)` individual data points. Out of `r ncol(data)`, we select the following variables to do EDA:

1. Province
2. State
3. State Code
4. Tests
5. Total cases
6. Deaths
7. Population (for demographic %'s)
8. % less than 18 years of age 
9. % 65 and over
10. % Black
11. % American Indian & Alaska Native
12. % Asian
13. % Native Hawaiian/Other Pacific Islander
14. % Hispanic
15. % Non-Hispanic White
16. % Not Proficient in English
17. % Female
18. No Cases	
19. No Stay At Home Order	
20. Stay At Home Order After First Case



To prepare our data for EDA we clean the dataset and remove all NAs. 
```{r remove_NAs}
#Print the number of NA values per each columns 
#colSums(is.na(data))
#Which col contains NA values? 
#colnames(data)[!complete.cases(t(data))]

#Drops rows containing missing values in any variable:
data_noNA = na.omit(small_df)
str(data_noNA)
```

# Chapter 3:  Independent Variables EDA

## United States COVID-19 Cases and Deaths by Provinces (Cities)


### What are the top 15 Provinces based on the number of cases?

The following bar chart shows the top 15 cities by number of Covid19 cases. 

```{r top_10_cases, echo=F}
 library(ggplot2)
 library(dplyr)
  top_n(data_noNA, n=15, total_cases) %>%
          ggplot(., aes(x=reorder(Province, -total_cases), y=total_cases, color=Province, fill=Province)) +
  geom_bar(aes(y=total_cases), stat="identity") + 
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 90, vjust = 1, size = 12, hjust = 1), 
        axis.text.y = element_text(vjust = 1, size = 12, hjust = 1), 
        panel.border = element_rect(colour = "black", fill=NA, size=1)) + 
  labs(title="Barchart of Top 15 Provinces (determined by number of Cases)", x="Province", y="Number of Cases")   
  
```


### What are the top 15 Provinces based on the number of deaths?

The following bar chart shows the top 15 cities by number of deaths. 

```{r top_15_deaths, echo=F}
 library(ggplot2)
 library(dplyr)
  top_n(data_noNA, n=15, deaths) %>%
          ggplot(., aes(x=reorder(Province, -deaths), y=deaths, color=Province, fill=Province)) +
  geom_bar(aes(y=deaths), stat="identity") + 
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 90, vjust = 1, size = 12, hjust = 1), 
        axis.text.y = element_text(vjust = 1, size = 12, hjust = 1), 
        panel.border = element_rect(colour = "black", fill=NA, size=1)) + 
  labs(title="Barchart of Top 15 Provinces (determined by number of Deaths)", x="Province", y="Number of Deaths")   
  
```



### Which cities had the greatest % of population of people with poor health?

## Patient Demographics
### Which race is the majority of the sample?
### Which race has the most average death rate and total cases?


## Stay at home policy in each province
### Is the stay at home policy related to the first case coming time?
### Is the stay at home policy after the first case related to the people inflected number?

## Underlying Health Conditions
## Impact of Temperature


